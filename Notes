Computer network is set of diffeerent devices and connection between them .It can be connection between computer or Internet itself.
By Computer network we mean network of different different devices that are capable of connectivity to internet .

TCP/IP  AND OSI Models
Models to describe actually how computers interact to each other.
Wire shark show the packetrs that are sent from your computer and back .

Devices in computer network commmunicates using strictly defined rule and strictly defined protocols .


computer network required when we want to receive and send some data we need to use some application.for ex google chrome appplication.Each aaplication usses one or several protocol .
Protocols are basically standard of communication that allow to talk betweeen different devices .like SMTP(GMAIL),HTTPS(CHROME),FTP,SSH(UBUNTU).


TCP/IP MODEL(TRANSMISION CONTR4OL PROTOTCOL AND INTERENET PROTOTCOL .

MODEL ONLY DESCRIBE HOW DEVICES COMMUNICATE IN A NETWORK .
ON OTHER SIDE SIDE THERE ARE DIFFERENT STANDARD THAT DESCRIBE COMMUNCATION.

TCP/IP HAS 4 DIFFERENT LAYER 
1. APPLICATION(HTTP,FTP,DNS,DHCP)(USED AT THE TOP LEVEL OF THE TCP /IP MODEL)
2.TRANSPORT (TCP belongs to this layer)(IT ESTABLISHGES END TO END  COMMUNICATION ADN RELIABLY DELIVER DATA  BETWEEN TWO DIFFERNET END POINT PROTOCOL USED ARE TCP/IP,
TCP ESTABLISHES END TO END SESSIN BETWEEN TWO DIFFERENT END POINT RELIABLY SEND THE DATA AND IT IS FULLY TRANSPARENT FOR THE APPLICATION LAYER IF DATA IS SEND THERE IS NO NEDED TO HAVE TCP[ SESSION ALIVE )
(UDP DOESNOT ESTABLISH SESSION ON OTHER SIDE IT SIMPLY SENDS DATA FROM ONE END POINT TO ANOTHER THUS IT CANNOT SENDS DATA RELIABLY )
3.INTERNET (IP belongs to this layer )(TO CONNECT DIFFEEENT NETWORK FIND OPTIMAL PATH AND SENDS PACKET FROM ONE NETWORK TO ANOTHER .)(THERE ARE SEVERAL PROTOCOL THAT WORK ON THSES MODEL 
THEY ARE IPV4,IPV6,ICMP)
4.NETWORK ACCESS.(THIS IS IMPORTANT FOR THE TRANSMISSION OF THE DATA OR THE PHYSICAL MEDIA PROTCOL USED IS ETHERNET )(DIFFERENT TECHNOLOGIES ARE USED IN NETWORK ACCESS LAYER LIKE BLUETOOTH WIFI)(THE MAIN
RESPOSIBILITTIES TO SEND DATA OVER THE PHYSICAL MEDIA )(THERE CAN BE DIFFERENT TYPE OF MEDIA )

ALL LAYERS ARE INDEPENDENT .

COMPUTER COMMUNCATE USING DIFFERENT PROTOCOL ON DIFFERNT LAYERS .


OSI MODELS(OPEN SYSTEM INTERCONNECTION)(IT IS BETTER FOR UNDERSTANDING )
IT HAS 7 DIFFERENT LAYER.
1.APPLICATION LAYER (GOOGLE CHROME,WHATSAPP)
2.Presentation :-Resposible for translation,encryption,and data compression for the application layer .
3.Session layer(for session adn establishment and termination)
4.transport layer (for data transmission over network using TCP/UDP)
5 Network layer :(this layer is resposible for selection of best path from source3 to destination and actual routing of the data from source to destination )
6 Data link layer :this layer is resposible for communication with physical layer dealing with some eror that may occur during commucnation between different devices via
some physical media 
these data link layer ahs two subl;ayer 
1.Media AcCESS Control 
2.Logical Link layer .
7 transmission over different physical media .

Protocol Data unit :-PDU's is smallest piece of information that is related to every layer .Tbhus we can say that bits are PDU's for the OSI model .

The 7 layer is divide into two parts 
1.Host layers 
2.media layers 

For data link layers PDU is frame :-for example ethernet frame .
For network layer PDU is packet.Thus when I say packet is the network layer of the OSI model .I can say IPV4 or IPv6 packet .
For Transport layer there can be TCP or UDP segment .Segment is the smallest piece of information on the transport layer of the OSI model .
Finally Data is the PDU that is common for the application (Interaction with the end user HTTP,FTP),presentation(JPEG,UTF-8),session(Establishes and control session L2TP,H.245).
Transmission of data as (ethernet,wifi,bluetooth).


Encapsulation adn Decapsulation.

Data encapsulation in the TCP/IP model 


It is the process of formatting data and this process adds header to the data .
1. DATA
2.SEGMENT HEADER ,DATA
3.PACKET HEADER ,SEGMENT HEADER ,DATA.
4.FRAME HEADER ,PACKET HEADER ,SEGMENT HEADER ,DATA ,FRAME TRAILER .
5. BITS 


On the opposite side we do the decapsulation 
On the physical layer we get the bits then data goes to Data link.
on the data link layer it reads only the data that is added to the data link layer .
Then it goes to network layer  then it reads the data but now without frame header and frame trailer .
Then transport layer reads the segment header 
Afterwards data goes to application.


ETHERNET 

In tcp/ip model in transport layer we are using TCP protocol adn in the network layer we are using IP protocol.

##It is not just single protocol it is a set of different protocol that define communcation between different devices on data link and physical layer like IEEE 802.3 THAT DEFINE 
COMMUNCATION BETWEEN DEVICES IF THE MEDIA IS WIRED 
AND IEEE 802.11 DEFINES COMMUNICATION BETWEEN DEVICES IF MEDIA IS WIRELESS.


Difference between cooper cable fiber and wireless media.

Data link layer is same for all but physical layer could be different for different cases .We can use media as copper ,fiber or wireless.

Copper cable consist of 8 different wires these are combined into 4 pairs 
Also copper cables has connector on two end and the standard for those connector is here it is RJ45
using Fiber cable we can transmit data using actual light .
1 stands for presence of light in the wire and 0 stands for absence of light in the wire .
Uisng single mode we can transmit data at higher rates and at longer distances than multimode.


Fiber are expensive .


wireless media IEEE.802.11 A, AC,N THAT DEFIENS WIRELESS COMMUNICATION.

1.IT can lead to interference leads to unreconizable signal.
2. its distacnes are limited .

upper layer doesnot know about the type of media that is being used .

If specific devices wants to to connect to other devices it must have specific controller such controller are called network interface card(controller). 

Every network interface card has built in hardware address ccalled MAC address.

MAC stands for media access control address

This MAC address is built in every hardware.Every MAC adress must be unique in the world.

In the same network devices must have different MAC address.In order to communicate with different MAC address.

MAC address is data link address.Such hardware addresses are required for correct commmunication via copper cable, fibre or wireless.


Each MAC Address consist of 48 bits or 6 octets .

there are two different sections in every MAC address  OUI (organizationally unique identifier) and NIC(Network Interface Controller specific )


Network Characteristics 
BANDWIDTH

MAXIMUM AMOUNT OF OF BITS THAT COULD BE TRANSMITTED OVER THE LINK IN SPECIFIC AMOUNT OF TIME .

THROUGHPUT

IT IS THE ACTUAL AMOUNT OF DATA TAHT COULD BE TRANSMITTED OVER SPECIFIC LINK OR CONNECTION.
CONSIDER LINK bANDWIDTH IS 100 mbps 


DATA TRANSFER TIME FROM ONE DEVICE TO ANOTHER(ONE WAY DELAY)

1.QUEUING DELAY(WHIEL TRANSFERRING DATA AT ONCE ALL THE DATA CAN'T BE PROCESSED THUS WE PUT IT IN QUEUE LEADING TO QUEUEING DELAY)
2.PROCESSING DELAY(TWO MDIFFERENT COMPUTER WITH MULTIPLE DEVICES BETWEEN THEM LIKE ROUTER )
3.TRANSMISSION DELAY (HOW MUCH TIME TAKE TO TRASMIT actual frame over wireless or wired connection)
4.PROPAGATION DELAY(time to travel single bit of data from one endpoint to other )

LATENCY IS USUALLY APPLIED TO APPLICATION LAYER OF TCP/IP MODEL


Round Trip Time or PING

time required to send data from one device to another and back .

RTT lower than 300 ms is almost unnoticable 

JITTER
It tellls how latency differs overtime for different packets.
Different packets have different delay i.e latency leaads to sending of packet in order 1,2 ,3 and 3,1,2.
If jiter is very high sometimes some packets will be discarded or lost by the receiver .
I fjittter is very large communication is difficult .
if network comdition are stable then jitter is less.


Switches and Data link layer


Network Switch 

it operates on physical or data link layer 
It interconnect different devices using cooper and fiber link layer .
It doesnot work on application ,transport and Network layer.
There are two types of port end user DOS ports and several uplink ports to connectionto switches 

How different computer will communicate with each other via switch .\
Every computer has its own unique MAC address
  Gi0/1:- 0 is number of slots in the switch and 1 is the port .



HOW DOES IT WORK 
1:- Lets say we have a MAC address at Gi0/1 port and Gi0/2 and Gi0/3 are empty in such case frame is send to every where except the port where it is rece3ived from.
Thus the frame is send to all the computer then the computer will compare there MAC address with destination MAC address.
2. Now if Gi0/2 wants to send the data from Gi0/1 then we can place the MAC adress of Gi0/2 then send the data back to Gi0/1.
3 Now it will not send the data to other as it know where is the sources and destination is .


FRAME OF THE ETHERNET defined in th IEEE802.3 address.

Preamble 7bytes(in conjuction with SFD)
Start of Frame Delimiter (used for synchronization of sender and receiver )
Destiantion MAC address(Every frame start with destination MAC address)(6 bytes )
Source MAC address(6 bytes long)
VLAN TAG(4 BYTES)(if present data pay;lod is 42 byte minimum else it is 46 bytes .
TYPE(2 BYTES)WHICH TYPE OF PROTOCOL IS ENCALSULATED NEXT LIKE IPv4 or6
data payload (42 to 1500 bytes)(it has network layer or transport layer header inside )
CRC(FCS)
except preamble every thing is taken using one way hash function ev ery device calculates trailer and if frame is modified receiver after creation of checksum matches to theat 
of the received check sum will see that check sum donot matches it will discard such frame .
total frame length is from 64 bytes to 1522 bytes.


TYPES OF COMMMUNICATION 

UNICAST:When the specific device wants to send data to other single device i.e when i want to talk to other single person I use unicast.It is used by devices like
phone,laptop and soon.
MULTICAST:when the specific device wants to send data to specific group of other devices  
BROADCAST:When single device communicate with other devices .It consist of all 1's in binary format .

types of MAC addresses
1.UNICAST
2.MULTICAST
3.BROADCAST IT IS USED AS DESTINATION MAC address in the frame when some devices wants to send frame to all the devices in the same switched network adn switchesw will forward such frames to all ports


HALF DUPLEX AND FULL DUPLEX
FULL DUPLEX: WHEN TWO DEVICES ARE ABLE TO SEND AND RECEIVE DATA BETWEEN EACH OTHER SIMULTANEOUSLY.
HAL DUPLEX:DATA COULD BE TRANSMITTED ONLY IN ONE DIRECTION AT ANY MOMENT OF TIME 


HALF DUPLEX COLLISION :

COLLISION OCCURS WHEN DATA ON TEH SAME PHYSICAL MEDIAA IS TRANSMITTED BY DIFFERENT DEVICES SIMULATANEOUSLY .

CSMA/CD and CSMA/CA are defined for handling collision.

Collision DOMAIN

HUBS create large collision domain.
CSMA/CD  can detect collision at every computer and hadle it .
Switch work on physical and data link layer of TCP/IP model and it processes frames
Here collision will not effect other parts.



TRY TO AVOID HALF DUPLEX SETTING .


DHCP has source as unique adddresss but the destination is broadcast 



Network Layer subsection:

Switched network disadvantage 

Switch has large table for MAXC adress

1. Switch sends frames with destination broadcast 
leads to broadcast storm .
2.large MAC addresss table 

Switched network is not a good solution for large network.


for very large network like internet then ofcourse other solution should be used .


Interact between different network we use Router 

IP address
It is the logical address that is assigned to the device in the network layer of the TCP/IP model .
If a device want to communicate with other device it must have IP address assigend to it .

MAC address:-Hardware address assigned by the maufacturer ot the network interface card at the data link layer They are represented using hexadecimal character .
Ip address:-It is a logical address assigned to the devices usually bby the DHCP server on network layer of TCP/IP model and Ip adddress is done using Decimal character.

Ip address may change but MAC donot change .

IPv4 and IPv6 


Both are logical address of the device in the network layer 
IPv4 uses decimal( 4 different section) 
IPv6 uses hexadecimal(128 bits)(8 different section)


IPv4 address format 

4 octet and each octet =8 bit.
every octet is represented using decimal number 
lowest decimal number we can see in octet is 0.
largest decimal number is 255.

Total quantity of IPv4 ADDRESS IS AROUND 3 BILLION.

IT is not very large not enough to assign IP adress to all device in the world .
MAC address may be from different manufactures and may not impact communication between devices .
But IP ADDRESS MUST BE FROM THE SAME LOGICAL NETWORK LIKE 172.17.5.1 DEVICE1, 172.17.5.12 DEVICE 2,172.17.5.13 DEVICE 3.



TYPES OF IP ADDRESS

1.UNICAST: ASSIGNED TO SPECIFIC DEVICE IN THE NETWORK FOR ONE TO ONE COMMUNICATION 
2. MULTICAST :SPECFIC DEVICE WANTS TO SEND DATA PACKETS TO MULTIPLE DEVICES 
3.BROADCAST: ALL PALCES 255.255.255.255


Router is network device that is resposible for routing of IP packets on network layer of TCP/IP.ROUTING works on physical ,data link and network layers .
Thus ports of router has ports these have Ip addresses adn MAC addresses.
Router does need information about otehr network where these computer are allocated which is located behind a routere.
For incoming router perform decdapsulation till network layer
for outgoing it perform encapsulation .
Routert find optimal path and route packets 
Its responsibility is to first find optimal path between routing network 
then route actual packets to there destination.

LAN :set of devices and interconnections under  common administration typically located in the same geographical area 
WAN: covers largfe  geographical area and consiost of multiple LANs


IP addreses classes 
A(1.0.0.0 TO 126.255.255.255)(FIRST OCTET(0XXXXXXX)),B(128.0.0.0 TO 191.255.255.255 )(10XXXXXX),C(192.0.0.0 TO 223.255.255.255)(10XXXXXX),D(224.0.0.0 TO 239.255.255.255)(USED FOR MULTICAST FOR VIDEO AUDIO STREAM)(1110XXXX),E(240.0.0.0 TO 254.255.255.255)(RESERVED FOR FUTUTRE USE)(11110XXX)..


LOCAL HOST IP ADDRESS or loop back ip address.


IT IS 127.0.0.1
Using this IP address you could verify whether network stack actually operate on specific device or not .
Also using this IP adress you could connect to any services that are running locally on local host


Difference between private and public Ip addresses

Private Ip addresses are addresese that are not routable in global internet network 


That means routers of internet providers will simply drop any IP packets that is from private Ip adddresses range .


thus if any device wants to connect to to the internet with the private Ip address it will not be able to connect but if the router share the packet with public IP addresses it will be able to connect .


But if a private network has same IP address in other place the two private network can connect with each other .

**So to connect to internet by different devices with private  IP adderess that are non routable in global internet .This is done by NAT (Network address translation)
It helps provide access to the Internet for devices with private IP addresses .



NETWORK 


EVERY SINGLE DEVICE IN INTERNET MUST BELONG AND BELONGS TO SPECIFIC NETWORK .
NETWORK IS A LOGICAL GROUP OF DEVICES AND DEVICES CAN EASILY COMMUNIATE BETWEEN EACH OTHER VIA SWITCHES THEY DONOT REQUIRE ROUTERS.
HOW TO DETERMINE IF DEVICE BELONGS TO THE SAME NETWORK .FOR THAT WE HAVE NETWORK PREFIX AND NETWORK MASK .(10.0.0.0/8) USING THAT WE CAN SPLIT EVERY IP ADDRESSES IN
TWO DIFFERENT PARTS NETWORK PART AND HOST PART.
ALL DEVICES IN THE SAME NETWORK HAS SAME NETWORK PART AND HOST PARTS MAYBE OFCOURSE DIFFERENT ON DIFFERENT DEVICES.
WHERE HOST PART END AND NETWORK PART BEGIN IS DEFINED BY THE NETWORK MASK.
FOR EX (10.0.0.0/8) IS HERE FIRST 8 BITS ARE NETWORK PARTS AND REMAINING 24 PARTS IS HOST PARTS .

IP ADRESSING AND IP PACKETS 
PRIVATE IP ADRESS RANGES
1 CLASSA  network(10.0.0.0 -10.255.255.255)(it is private network )(network is actually 10.0.0.0/8)(LAN)
16 classB networks (172.16.0.0 -172.31.255.255)(it is private network )(network is actually 172.16.0.0/16)
256 classC networks(192.168.0.0-192.168.255.255)(it is private network )(network is actually 192.168.1.0/24) 

PUBLIC IP ADDRESS RANGES 

ADDRESES WHICH ARE NOT ROUTABLE IN GLOBAL INTERENT NETWORK IS PUBLIC IP ADDRESSES 

RIPE IS RESPOSIBLE FOR ASSIGNMENT OF PUBLIC IP ADDRESES 


STATIC AND DYNAMIC IP ADDRESS
WHEN STATIC IP IS ASSIGNED TO THE SERVER WE CAN SAY WE CAN ACESS THE SERVER USING THIS STATIC IP.
STATIC IP ARE ASSIGNED TO PUBLIC SERVER THAT ARE RUNNING SOME PUBLIC SERVICES LIKE WEB OR SMTP SERVICE.
ADVANTAGE OF STATIC IP 
1.IT IS CONVIENIENT FOR WEB OR EMAIL SERVICES.
2.DNS IS USED TO MAP HOST NAME TO IP addresses.

disadvantage 

1.more expensive than dynamic IP
2.Requires additional security .
It is reserved just for one server 

DYNAMIC IP ADDRESES

IP ADRESES ASSIGN DYNAMICALLY TO DIFFERENT DEVICES.THIS ASSIGNMENT HAPPPENS USING SERVER CALLED DHCP SERVER .(DYNAMIC HOST CONFIGURATION PROTOCOL )
THESE CHANGE SPERIODICALLY
1. DYNAMIC ADDRESES ARE CHEAPER THAN STATIC IP 
2.MORE PRIVACY (aS IP ADDRESS CAN CHANGE OVER TIME )
3.DDNS (Dynamic DNS)could be used for automatic inforamtion update after each Ip address change .


disadvantage
1. Ip address may change .
2.we requiree to setup DHCP server to obtain an IP address.



IPv4 packet structure 
there are minimum 5 32 bits section
1.1Version
1.2IHL(internet header length((min lenght 16 bits)(5 vaue means we have 5 32 bits length in packet header).
1.3 DSCP(differentiated services code point)(we can prioritize some packets)
1.4 ECN(explicit congestion motification)
1.5 Total length (total length of IPv4 packets)
2.1 Identification : this identifier allow to gather all fragment of the single intial packets to the origianl packet because there could be different fragment of different packets .
2.2 FLAG ( whether packet was fragmented or not )
2.3 Fragment offset:if packet is divided than each packet has fragment offset number .
3.1 time to live:to prevent infintite loop of packets .when ttl field become zero than router discards such packet and basically every router when it receives specific 
IP packet it decrement TTL field by 1 and send packet to next router .
3.2 Protocol:it is link to upper layer protocol used inside IPv4 packets.
3.3 header check sum(it is calculated only from IPv4 header)(it doesnot include data or payload )
every router receive IPv4 packet need to calculate header check sum when it decremnt ttl .


Source address
Destination address
options 
data payload it can contain TCP/UDP header.




ADRESS IN THE NETWORK 
 
 10.0.0.0/8 HERE NETWOIRK PART IS FIRST 8 BIT AND THE HOST PART IS 24 BITS
 NETWORK ADDRESS 10.0.0.0
 BROADCAST ADDRESS 10.255.255.255
 HOST ADDRESS 10.5.0.41
 
 HOST ADDRESS COULD BE ANY IP ADDRESS BETWEEN NETWORK ADDRESS ADN BROADCAST ADDRESS.
 
 THUS IN ANY NETWROK NETWORK AND BROADCAST ADDDRESS IS FIXED.
 


NETWORK MASK 
CLASS A HAS MASK 8 CLASS B HAS MASK 16 CLASS C HAS MASK 24
EVERY NETWROK HAS 4 OCTETS WITH TWO PARTS AS NETWORK PARTS AND HOST PARTS .
ARE BOTH HOST IN THE SAME NETWORK OR NOT ?
FOR THAT WE NEED TO FIND NETWORK ADDRESS FOR EACH HOST AND THEN COMPARE NETWORK PREFIXES)(ADDRESSES).
NETWORKLL MASK EX 255.255.0.0

CONSIDER NETWORK MASK IS 24 BITS 
192.168.7.10
192.168.7.11
BELONGS TO THE SAME NETWORK 

BUT 192.168.20.12 BELONGS TO THE DIFFERENT NETWORK .

FOR SIMPLE EXAMPLE JUST  DO AND OPERATION BETWEEN HOST IP ADDRESS ADND NETWORK MASK .


HOW MANY HOSTS IN THE SAME NETWORK  ?
130.18.31.0/24
Consider quantity of host bits:8 
network address:130.18.31.0
broadcast address130.18.31.255
available IP address2^8-2=254




SUBNETTING 

IT ALLOWS YOU TO JUST NOT USE THE DEFAULT MASK I.E /8,/16,/24.

IT HELPS TO DECRESE THE QUANTITY OF HOST IN EVERY NETWORK 
OPTIMIZE USAGE OF PUBLIC IPv4

it is a process of creating multiple subnetwork from the same single network .
from the host parts we could create additional subnets 
thus we could split the single network to the multiple network called subnetwork 
This process uses several host bit and ads them to network parts 

it helps to decrese the quantity of host in the network 
using subnetting we increse quantity of the available network but with fewer host in each .


WE can create maximum four subnet when we borrow two bits 


Largest subnet mask is 30 as after that there is no usable Ip address.



ARP AND ICMP 

THESE ARE SUPPPORTINBG PROTOTCOL AND THEY ARE USED AS SUPPORTING DATA .

Default gateway(router)

Router act as gateway to internet for the devices in the network .
Default router is used for connection to other network .
all packets to other network are sent using the router .

default router LAN IP is dame as the IP of various devices in the network .


Now the question is how devices connect with each other in the same network and if they want to send data they need to use router and how these default gateway workl in such case.


ARP protocol (addresss resolution protocol )
it is used to resolve the addresss.

It is a network layer protocol .(Ether type 0x0806)
doesnot use IPv4 header.
This protocol is used for destination IP address to destination MAC address when some host want to send data to another host .

ARP request from the source host is sent to broadcast MAC address.

ARP response is sent unicast from destination host with target IP adress to source host .

**ARP IS USED WHEN ONE HOSTS WANTS TO SEND IP PACKET TO THE OTHER HOST USING EHTERNET ENCAPSULATION 

USE OF ARP 

WITHOUT KNOWING THE MAC ADDRESS OF THE OTHER DEVICE THE SWOURCE DEVICE WILL NOT BE ABLE TO SEND DATA TO THE OTHER DEVICE .THIS IS WHERE ARP IS USED .SO DEVICE SEND THE ARP REQUEST TO THE OTHER 
DEVICE.

ROUTER AND OTHER DEVICES ARE ALL CONNECTED TO THE SAME SWITCHED NETWORK .FOR EX ALL HAVE 172.16.1.0/24 PREFIX .

WHEN ONE DEVICE WANTS TO HAVE MAC ADDRESS OF OTHER DEVICE IT SEND ARP REQUEST ( BROAD CAST REQUEST) MAC ADDRESSS I.E ALL F'S

DEVICES INSIDE THE ETHERNET HEADER AFTER STRIPING THEY WIL FIND THE ARP REQUEST THEY WILL FIND WHAT IS THE MAC ADDRESSOF HOST WITH IP ADDRESS AS 172.16.1.7.
nOW THEY COMPARE IT AND THEN SEND ARP RESPONSEIS SEND UNICAST FROM ONE HOST TO OTHER .

IN ARP RESPONSE IN THE ETHERNET HEADER WILL HAVE SOURCE MAC ADDRESS BE EQUAL TO THE DEVICE WE WANT TO SEND AND THE OTHER DEVICE MAC ADDRESS EQUAL TO OTHER DEVICE MAC ADDRESS.

NOW the computer know where we need to send to .



Consider Ip adress 172.16.1.5wants to send some data to computer with IP address 8.8.8.8(IP address of google DNS server )This se3rver is placed somewherre behind default router .
It is located in other network somewhere in Internet .ARP request can't be sent as server is in the different.
tio tell if the host is the same network it is done using ANDing of network Ip and network mask we get network prefix  and again apply network mask to the IP of google 
then we get that network prefix are different .Tus target host is located in the different subnetwork .


Now how to send to the other Ip address that is where default gateway router comes in ?
In this case it will send its IP packets dedicated to this server to default router .On data link layer


**TCP/UDP 

TRANSPORT LAYER

ABOVE IT IS APPLICATION LAYER ON IT THERE COULD BE DIFFERENT APPLICATION LIKE (HTTPS,HTTP,SSH,IMAPS,SMTP) and on every single host different can run simultaneously.
and they communicate with transport layer and transport layer communcicate with other layer .

Thus all those application needs to somehowuse transport layer .
Transport layer is usually used to send and receive application data between different hosts .
transport layer can send data either reliabily with connection estabilishment or unreliably without connection establishment .


Clients vs Server

When we talk about connection estabilishment between two different hosts on transport layer there are always two sides 
1. estabilishes connection (CLIENT)
2. acccept the connection.(SERVER)
USUALLY MOBILE COMPUTER ARE CLIENTS ON OTHER END HOSTS THAT ALLOCATES IN INTERNET OVER SOME SERVICES LIKE WEB SERVICES ARE CALLED SERVERS AND THEY ACCEPTS INCOMING CONNECTION
BUT OFCOURSE THOSE SERVER IN INTERNET INITIATE OTHER CONNNECTION .IN THOSE CASES THEY ACT AS CLIENT RELATED TO OTHER SERVERS.

FOR EXAMPLE : NOW QUESTION IS HOW THE SERVER KNOW TO WHICH APPPLICATION CLIENT IS WANT TO DO .APPLICATION LIKE (HTTPS,HTTP,SSG,IMAP,SMTP)?


When connection is established client server can send data to each other .


** The connection is full duplex connection.


Transport layer connection 

Every connection between client and server at the transport layer is estabilished between two port - source port and destination port .

When connection is estabilished client send packets from source port to destination port  and server when it wants to send data then it uses source port and send data to the destinatioon port at the client
side.


There are differnet applications and different application uses different protocol.
for example such as google firefox use HTTPS,HTTP protocol to retrieve data from the remote server .
When we load any single web page there may be multiple conneciton to different remote servers in order to get different pieces of the same web page .

SSH: we could open remote terminal session and manage remote servers.
IMAPS or SMTPS secure used if you want to send or receive some email.
THIS SERVER HELPS US DISTINGUISH WHICH DATA BELONSGS TO WHICH SERVER .THIS IS DONE WITH THE USE OF PORTS .AS THESE PROTOCOL HAVE DIFFERENT PORTS .(HTTPS(443),HTTP(80
),SSH(22),IMAPS(993),SMTP(465))


EVERY CLIENTS MAY INTITATE DIFFERENT SERVERS USING THOSE PORTS. 


MULTIPLEXING AND DEMULTIPLEXING 

MULTIPLE APPLICATIONS COULD COMMUNICATE USING TRANSPORT LAYER 
MULTIPLE APPLICATION MAY WORK SIMULTANEOUSLY ON THE SAME HOST.
MULTIPLE SERVICES IS ENABLED ON REMOTE SERVER.
PROCESS WHEN DIFFERENT APPLICATION COMMUNICATE OVER THE SAME TRANSPORT LAYER AND USING THE SAME IP ADDDRESS ON THE SAME HOST IS CALLED MULTIPLEXING .

WHEN DIFFERENT APPLICATION DATA GO FROM CLIENTS TO SERVER THA N AT SERVER WE PERFORMS DEMULTIPLEXING .

THUS IT TAKES DIFFERENT SEGMENT AT THE TRANSPORT LAYER AND DIRECT THEM TO DIFFERENT APPLICATIONS THAT ACTUALLY NEED THIS DATA .


DIFFERENT PORT RANGES 
 
 PORT is a 16 bit number range in 0-65535
 using 16 bit we can create many port combination number .
 
 There are three ranges
 1.  Well known  or system Ports 1-1023HTTPS,HTTP,SSH,IMAPS,SMTPS  use port number from this range 
 2.1024-49151 Registered Ports (Registered by IANA)suppose we create some custom applicationor custom prototcol or application we could use range 
 3.49152-65535  Dynamic or Private Ports (can't registered by IANA)


when client intitate connection to remote server is not allowed to select number from the well known port range .

Network Socket are host end point that is used for outgoing and incopming data and it consist of 5 field and on every server and client network socket must be present if 
they want to proces some data and send the up to application layer of TCP/IP model.

They have 5 parts 
1.Transport protocol(TCP/UDP)
2.source IP address
3.Source Port
4.Destination IP address
5.Destination Port

If there is client and server and client intiates connection to server 
Then on server side you will find network socket where source Ip and port match to client IP address and clients PORT that was used for initiation of the connection.
Destination IP address and Destiantion port match with that on the server side .

on client side source ip and port are reversed.

At every client and server there maybe multiple socket created at every moment of time .
Socket can be removed dynamically dn added dynamically.

TCP 52.12.20.3 53212 17.248.14.204 443 ESTABILISHED .
If TCP * * 17.248.14.204  443  LISTEN . THEN SOURCE IP ADRE3SS AND SOURCE PORT ARE WILD CARD  IT MEANS THAT THIS PARTICULAR SOCKET WILL ACCEPT ANY SEGMENT THAT COMES FROM 
ANY SOURCE IP ADDRESS FORM ANY SOURCE PORT BUT PORTOCOL OFCOURSE MUST BE TCP
LISTEN MEANS THIS SOCKET WILL LISTEN INCOMING CONNECTION VIA TCP FROM ANY SOURCE IP ADDRESS AND FROM ANY SOURCE PORT.

TCP * * * 8080 LISTEN THIS PARTICULAR SOCKET WILL LISTEN TO ANY TCP SEGMENT FROM ANY SOURCE IP AND SOURCE PORT TO ANY OF THE IP ADDRESES CONFIGURED ON THE SERVER .
BECAUSE SERVER MIGHT HAVE MULTIPLE NETWORK CONNECTIONS ,MULTIPLE NETWORK INTERFACE CARD BUT DESTINATION PORT MUST BE 8080.

UDP * * 8.8.8.8 53 IT IS A WEL KNOWN PORT RESERVED BY DNS PROTOCOL

MULTIPLE SOCKET 
for  1 st device In this case intital connection is made to wild card socket and state of the socket on the server is listened and server will create new additional socket with exact source IP address and exact port 
After that in this seperate socket TCP client wil establishes connection and afterwartds when tcp connection is established the clint adn server will exchancge data over this particular socket .and 
ofcourse in client there will be new socket created and there source and destiantion ports will be reversed .

for 2nd device same as first device.

But now serrver will see that we have to send the data depending on pair of IP address and port for evfery single socket 

Now consider adevice that wants to make several connection to the same server 
 
 Now there will be DIFFERENT PORT WILL BE USED WIHT SAME IP ADDRESS TO CONNECT TO A SERVER.

NOW HTE SEWRVER WILL HAVE 3 DIFFERENT SOCKETS 
WILD CARD FOR DIFFEERENT PORT .THUS IT WILLL KNOEW WHICH SOCKET TO USE WHEN THE DATA COMES FROM WHICH SOCKET .


 DIFFERENT APPLICATIONS  ARE ABLE TO USE SAME PORT IF PROTOCOL ARE DIFFERENT I.E ONE PROTOCOL CAN BE TCP AND OTHER CAN BE UDP .  



TCP VS UDP 
TCP(SSH,HTTP,FTP,IMAP) UDP (DNS,DHCP,NTP,Skype)
TCP :-TCP IS A CONNECTION ORIENTED PROTOCOL I.E TCP CONNECTION MUST BE ESTABLISHED
1. THERE IS CONNECTION ESTABLISHMENT 
2.IN ESTABLISHED CONNECITON YOU COULD TRANSMIT AND RECEIVE SEVERAL DAT .
3.AFTEERWARDS CONNECTION IS CLOSED .
UDP : IT IS A CONNECTIIONLESS PROTOCOL AND THERE IS NO CONNECTION IN UDP.

TCP IS SLOWER AND ADDS MORE OVERHEAD 
UDP IS FASTER .


TCP :FLOW CONTROL AND RECOVERY FROM TRANSMISSION ERROS 
UDP : NO FLOW CONTROL ADN NO TRANSMISION 

TCP connection establishment 

TCP establishes connection at transport layer of TCP IP model .

Process is called three way handshake connection esrtablishment 

1. intitalizes  TCP session (sends the SYN i.e the synchronization ) 
2.confirm TCP session and intitalization by sending SYN and ACK BY THE SERVER 
3.Finalize TCP session establishment by sending ACK flag.


TCP HEADER 


16 BIT SOURCE PORT AND 16 BIT DESTINATION PORT SOURCE AND DESTINATION PORT IS PRESETN IN EVERY SINGLE TRANSPORT LAYER SEGMENT 
THEN COMES SEQUENCE NUMBER WHICH IS 32 BIT  ( SOMEHOW WE NEED TO MARK DATA THAT IS SENT IN THE TCP SEGMENT )
ACKNOWLEDGEMENT NUMBER( it tell which byte to receive from the server next)(SERVER OR CLIENT WANTS TO ACKNOWLEDGE THAT SERVER HAS RECEIVED SPECIFIC AMOUNT OF DATA FROM ANOTHER SIDE .THUS IF SERVER SENT CLIENTS 5 BYTE OF DATA SERVER MAY TELL CLIENT THAT IT HAS RECEIVED
5 BYTES AND IS READY TO RECEIVE NEXT PORTION OF DATA .
BOTH CLIENT AND SERVER MARKS EVERY TCP SEGMENT WOITH SPECIFIC SEQUENCE NUMBER .
4 BITS AS THE TCP HEADER 4 BITS ARE RESERVED 8 BBITS FLAG 16 BITS WINDOW (IT IS THE AMOUNT OF BYTE THAT ARE EXCPECTED TO BE ACKNOWLEDGED BY ANOTHER SITE BEFOR TRANSMISSION 
OF THE NEXT PORTION .
CHECK SUM 16 BITS( BASED ON TCP HEADER ,TCP DATA EPHERMERAL IP HEADER .)
16 BITS LONG URGENT POINTER .

OPTIONS +PADDING 32 BITS SECTION.


UDP connection 

here no  connection establishment required segment are send directly.
there is no state like established or listen stste for UDP socket . 



UDP header contain
1 Source port 
2 Destination Port 
3 Length (header +data)
4 Checksum (Ephermeral header)(UDP header)(UDP Payload)


FOR REAL TIME UDP PROTOCOL .


switches operate on data link layer of TCP/IP model there single responsibility is to switch frame as fast as possible .
router responsibilitites is to forward IP packets from source to destination 
IP prototcol is connection less prototcol that means that every single IP packet or IP data gram is treated as seperately this means that multiple packet that ascend from one host to another host 
may travel via diffeent path in the computer network .
main reposibility of router is to route packet from one source to destination.


ROUTER ARE RESPONSIBLE FOR ROUTING OF THE IP PACKETS TO THE DESTINATION NETWORKS

EVERY SINGLE ROUTER HAS A ROUTING TABLE AND IT IS USED FOR ROUTING DECISION .

** MAIN RESPONSIBILITY OF ROUTER IS TO BUILD ROUTING TABLE AND ROUTE IP PACKETS 

ROUTING TABLE 
ROUTERS KEEP ALL ROUTES TO THE KNOWN NETWORK IN THE ROUTING TABLE .


For example : router has two different interfaces Gi0/0 and Gi0/1 one interface is connected to 172.16.3.0.24 and other to 192.168.1.0.24
THu sethernbet frames are able to travel between one switch and one router and other switch and other router.

In the routing table those routes willl be marked as connected routes 

connected routes are routes to the network where routers own interfaces are attached have IP address mask and are up.It means that on giga bit 0/0 router may have following configuration setup.

END TO END PACKET TRANSMISSION

1.PC1 needs to find out where the destiantion IP address i.e PC2 is located its local address or not .It is done by doing AND operation between its mask and its and destiantion IP address and compare them .
2.On network layer PC1 adds IP header with source IP 172.16.3.7 ,destiantion IP 192.168.1.15 and TTL 64.
3.Before adding data link layer pc1 checks whether mac address of the default gateway is present there or not because when hosts want to send its data to the data network it will always send it to its default gateway.
to its MAC address.
PC1 checks local ARP table to find the MAC address of the default gateway.
4.On data link layer PC1 will add ethernet header (souurce MAC address is of PC1 na destiantion MAC addresss is the address of the default gateway.this destination MAC address it will take 
from the ARP cache table and afterwards it will send ethernet frame over physical media .
5.Switch 1 at data link layer receives ethernet frame form PC1 on switch 1 interface ,verifies FCS (if it is correct it accept the ethernet frame),check MAC address table to find where destination MAC is located 
and finds it behind Gi1/1.
6.Switch 1 adds MAC address of PC1 to  the MAC  address table to and maps it to the port first ethernet.
7. Swtich 1 send it frame to its interface.
8 Router receives Ethernet frame on its Gi0/0, on data link layer verifies FCS,checks the destination MAC address field and sees that MAC matches with MAC of its Gi0/0 
interface.
9.Router removes ethernet header and examine network layer IPv4 header and ,checks header checksum and TTL .Router has performed the decapsulation on the data link layeer
10 Looking in the IPv4 header it sees desitnation address doesnot match with any of the IP address configured on router itself Thus router must resend it IP packet further
11. Router checks the routing table to find the matching route for the destination address.For each route it applies network mask to the destination address
and compares the result prefix.
12.Assume that doesnot yet know about the MAC adddress of PC2 so it sends broadcast ARP request via its inteface Gi0/1 asking for the MAC address of the host .
13 On hte network layer router decrement its TTL host by 1and calculate new IPv4 header check sum .
14 Now to encapsulate further router adds new ethernet header and calculates FCS.Here source MAC adddress is that of the router and destination MAC adddress is that of the 
PC2.
15 Router sends Ethernet frame via Gi0/1 interface according to the  route in the routing table. Now this routiong packet has IPv4 header and the ethernet header with source and destination MAC addreses.
16 Switch 2 receives ethernet frame from router on Gi1/2 interface ,verifies FCS ,checks MAC addresstable to find where destiantion MAC is located and finds it behind
17 Switch 2 will send the ethernet frame to its interface .
18 PC2 will receives ethernet frame on its own ehternet interface.verfies FCS ,compare destiantion MAC adddress to its own if they are equal then it removes the ethernet header .
19 On the network layer PC2 checks the header check sum and TTL ,compares destination to its own Ip ,they are equal. Strips IPv4 header and segment to the transport layer for further processing.


Static and dynamic routes 
Static route is the route that is added into routing table manually .
We access router either using web user interface command line and add route manually .
three route 
1`. connected route 
2.static route 172.16.0.0/12 is accesible using 10.7.6.2
3.Type O stands for OSPF .here we can do automatic exchange of route using different router .Dynamic route are obtained dynamically via dynamic routing prototcol .


Default route is the last resort route and is chosen by the router if no other routes are matched .
default route is always the last route in the routing table .
This route is available via next router 10.1.5.3 with network /mask as *0.0.0.0/0
PURSPOSE OF DEFAULT ROUTE IS TO CATCH ALL PACKETS THAT DIDNT MATCH TO ANY OF THE PREVIOUS ROUTE IN THE ROUTING TABLE .
CONSIDER 5.5.5.5 WILL ALWAYS MATCH WITH ANY *0.0.0.0/0 

HOST IP ADDRESS IS AND WITH ROUTE MASK AND WE GET THE PREFIX AND IT IS MATCHED WITH THE DEFAULT ROUTE . 

IT IS KEPT AT THE END OF THE ROUTING TABLE .


NETWORK ADDRESS TRANSLATION

TWO APPLICATION LAYER PROTOCOL
DHCP AND DNS 

FOR proper communication every host in the computer network must have MAC address and IP address.Every host is located in specific subnetwork this means that host require 
specific network mask or subnetwork mask .This means that IP address and subnet mask are manditory configuration  parameter for every host in computer network .

if host wants to communicate with other computer in other network then such host need to have default gateway need to be configured.router always route packet to otehr network .
if host wants to communicate other server with there name then we use address of the  DNS server .


DNS 
domain name system  
it translates domain names to IP address.

 why names are needed ?
1. Host must communicate using there IP adddresses
either Ipv4 or IPv6 
2.On transport layer host communicate using such protocol as TCP or UDP
Many different end user devices communicae with the same public servers(for ex google search server)(thus the public server need somehow wasily accesible for people )
3. It is not convienient to memorize IP addresses ,especially IPv6 adress.


Domain Name is the name that identifies specific host in the computer network like google .com ,facebook.com,netflix.com,apple.com.


URL(uniform resource locator )
Uniform identifier (web address) of the specific resource in the internet .
All resourcce in internet have ther own web adress or URL.
URI is the identifier for the specific resource like book or movies .URI is subset of URL.
for example 
https://play.google.com/store/movies?ref=341
https(protocol)://play(subdomain).google(domain).com(top level domain)(TLD)/store/movies?ref=341
https://play.google(identifier for specific host in the internet )
(store/movies) is the path for specific resource at this specific host .
Domain+TLD is called root Domain.

Ports and Fragment in URL 
PORTS
Ports after TLD could be used instead of default protocol port 
https://my.website.com:4433
FRAGMENT 
URL fragment or anchor point to certain part of the resource 
https://my.website.com #section5

https(protocol)://api(third level ) .website(second level).com(top level)
https(protocol)://www(fourth level).amazon(third level) .co(second level).uk(top level).
full qualified domain name (FQDN)part between // and /
https://play.google.com/store/movies?ref=341


DNS (domain name system)is basically backbone or core of internet
Main resposibility of DNS is to resolve domain name or fully qualified domain names to IP addresses.

For example consider the user has only hte domain name for example google .com  it doenot know IP address and on the network layer of TCP/IP model host require to know destination address in order to send packet .


